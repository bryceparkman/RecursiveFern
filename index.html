<!doctype html>

<html>
<head>
  <title>Fern Generator</title>
  <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
  <table>
	<tr>
		<th></th>
		<th>a</th>
		<th>b</th>
		<th>c</th>
		<th>d</th>
		<th>f</th>
	</tr>
	<tr>
		<td>f1</td>
		<td>
			<div id="f1aV">0</div>
			<input id="f1a" type="range" value="0" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f1bV">0</div>
			<input id="f1b" type="range" value="0" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f1cV">0</div>
			<input id="f1c" type="range" value="0" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f1dV">0.16</div>
			<input id="f1d" type="range" value="16" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f1fV">0</div>
			<input id="f1f" type="range" value="0" min="-100" max="100" oninput="draw()"/>
		</td>
	</tr>
	<tr>
		<td>f2</td>
		<td>
			<div id="f2aV">0.85</div>
			<input id="f2a" type="range" value="85" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f2bV">0.04</div>
			<input id="f2b" type="range" value="4" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f2cV">-0.04</div>
			<input id="f2c" type="range" value="-4" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f2dV">0.85</div>
			<input id="f2d" type="range" value="85" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f2fV">1.6</div>
			<input id="f2f" type="range" value="16" min="-100" max="100" oninput="draw()"/>
		</td>
	</tr>
	<tr>
		<td>f3</td>
		<td>
			<div id="f3aV">0.2</div>
			<input id="f3a" type="range" value="20" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f3bV">-0.26</div>
			<input id="f3b" type="range" value="-26" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f3cV">0.23</div>
			<input id="f3c" type="range" value="23" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f3dV">0.22</div>
			<input id="f3d" type="range" value="22" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f3fV">1.6</div>
			<input id="f3f" type="range" value="16" min="-100" max="100" oninput="draw()"/>
		</td>
	</tr>
	<tr>
		<td>f4</td>
		<td>
			<div id="f4aV">-0.15</div>
			<input id="f4a" type="range" value="-15" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f4bV">0.28</div>
			<input id="f4b" type="range" value="28" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f4cV">0.26</div>
			<input id="f4c" type="range" value="26" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f4dV">0.24</div>
			<input id="f4d" type="range" value="24" min="-100" max="100" oninput="draw()"/>
		</td>
		<td>
			<div id="f4fV">0.44</div>
			<input id="f4f" type="range" value="4.4" min="-100" max="100" oninput="draw()"/>
		</td>
	</tr>
   </table>
  <canvas id="myCanvas" width="600" height="600">
  <script>
  		function createArray(length) {
			var arr = new Array(length || 0),
				i = length;

			if (arguments.length > 1) {
				var args = Array.prototype.slice.call(arguments, 1);
				while(i--) arr[length-1 - i] = createArray.apply(this, args);
			}
    		return arr;
		}
	
		var c = document.getElementById("myCanvas");
		var ctx = c.getContext("2d");
		var random;
		var cha;
		var list = [[],[]];
		var str;
		var str2;
		var extra = 0;
		for(var i=0;i<20;i++){
			if(i > 15) extra = 1;
			cha = String.fromCharCode(i/4+97+extra);
			str = "f" + ((i%4)+1) + cha + "V";
			str2 =  "f" + ((i%4)+1) + cha;
			list[0][i] = document.getElementById(str);
			list[1][i] = document.getElementById(str2);
		}
	draw();
	function draw(){
		var x = 0;
		var y = 0;
		var count  = 1;
		var v;
		for(var j=0;j<20;j++){
			if(j>15){
				v = 10.0;
			}
			else {
				v = 100.0;
			}
			list[0][j].innerHTML = list[1][j].value/v;
		}
		ctx.clearRect(0, 0, c.width, c.height);
		for (var i = 0; i < 10000; i++) {
			ctx.fillStyle="rgb(0,255,0)";
			ctx.fillRect(50 * x + 300, 600 - 50 * y, 1, 1);
			random = Math.random();
			if (random <= 0.01) {
				x = parseFloat(list[0][0].innerHTML) + parseFloat(list[0][4].innerHTML) * y;
				y = parseFloat(list[0][8].innerHTML) * x + parseFloat(list[0][12].innerHTML) * y + parseFloat(list[0][16].innerHTML);
			} else if (random <= 0.85) {
				x = parseFloat(list[0][1].innerHTML) * x + parseFloat(list[0][5].innerHTML) * y;
				y = parseFloat(list[0][9].innerHTML) * x + parseFloat(list[0][13].innerHTML) * y + parseFloat(list[0][17].innerHTML);
			} else if (random <= 0.92) {
				x = parseFloat(list[0][2].innerHTML) * x + parseFloat(list[0][6].innerHTML) * y;
				y = parseFloat(list[0][10].innerHTML) * x + parseFloat(list[0][14].innerHTML) * y + parseFloat(list[0][18].innerHTML);
			} else {
				x = parseFloat(list[0][3].innerHTML) * x + parseFloat(list[0][7].innerHTML) * y;
				y = parseFloat(list[0][11].innerHTML) * x + parseFloat(list[0][15].innerHTML) * y + parseFloat(list[0][19].innerHTML);
			}
		}
	} 
  </script>
</body>
</html>